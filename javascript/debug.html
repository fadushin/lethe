 <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>test</title>
        <script src="jsolait/jsolait.js"></script>
        <script src="thirdparty/movable-type.co.uk/sha1/sha1.js"></script>
        <script src="thirdparty/movable-type.co.uk/aes/base64.js"></script>

        <script src="thirdparty/ats.oka.nu/titaniumcore/js/tools/packages.js"></script> 
        <script src="thirdparty/ats.oka.nu/titaniumcore/js/tools/trace.js"></script> 
        <script src="thirdparty/ats.oka.nu/titaniumcore/js/tools/elapse.js"></script> 
        <script src="thirdparty/ats.oka.nu/titaniumcore/js/tools/isarray.js"></script> 
        <script src="thirdparty/ats.oka.nu/titaniumcore/js/tools/binary.js"></script> 

        <script src="thirdparty/ats.oka.nu/titaniumcore/js/crypto/BigInteger.init1.js"></script>
        <script src="thirdparty/ats.oka.nu/titaniumcore/js/crypto/RSA.init1.js"></script>
        <script src="thirdparty/ats.oka.nu/titaniumcore/js/crypto/SecureRandom.js"></script>
        <script src="thirdparty/ats.oka.nu/titaniumcore/js/crypto/BigInteger.init2.js"></script>
        <script src="thirdparty/ats.oka.nu/titaniumcore/js/crypto/RSA.init2.js"></script>
        <script src="thirdparty/ats.oka.nu/titaniumcore/js/crypto/Cipher.js"></script>
        <script src="thirdparty/ats.oka.nu/titaniumcore/js/crypto/SOAEP.js"></script>
        <script src="thirdparty/ats.oka.nu/titaniumcore/js/crypto/RSAKeyFormat.js"></script>
        <script src="thirdparty/ats.oka.nu/titaniumcore/js/crypto/jsSHA.js"></script>
        <script src="thirdparty/ats.oka.nu/titaniumcore/js/crypto/SHA.js"></script>
        
        <script src="crypto/namespace.js"></script>
        <script src="crypto/signer.js"></script>
        <script src="crypto/verifier.js"></script>
        <script src="crypto/key.js"></script>
        <script>
            
            __unit("debug.html");
            __uses("BigInteger.init1.js");
            __uses("BigInteger.init2.js");
            __uses("RSA.init1.js");
            __uses("RSA.init2.js");

            var BigInteger = __import(this, "titaniumcore.crypto.BigInteger");
            var RSA = __import(this, "titaniumcore.crypto.RSA");
            var rsa = new RSA();
            rsa.generate(128, 65537);
            
            /*
            var message = new BigInteger("DEADBEAFDEADBEAFDEADBEAFDEADBEAF", 16);
            var encrypted = rsa.processPublic(message);
            var decrypted = rsa.processPrivate(encrypted);
            */
            
            var signer = net_dushin_crypto.SignerFactory.createSigner(
                {privateKey: net_dushin_crypto.KeyUtil.encodePrivateKey(rsa)}
            );
            var signedObject = signer.sign({foo: "bar"});
            console.debug(signedObject);
            
            var verifier = net_dushin_crypto.VerifierFactory.createVerifier(
                {publicKey: net_dushin_crypto.KeyUtil.encodePublicKey(rsa)}
            );
            console.debug(verifier.verify(signedObject));
            
            
        </script>
    </head>
</html>

